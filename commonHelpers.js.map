{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport './css/styles.css';\nconst API_KEY = '42158298-7ee19009037b01d9fe650f472';\nconst URL = \"https://pixabay.com/api/\";\nconst formEl = document.querySelector(\".form-inline\");\nconst containerEl = document.querySelector(\".card-container\");\nformEl.addEventListener(\"submit\", handleSearch);\nfunction showLoadingIndicator() {\n    containerEl.innerHTML = '<div class=\"loader\"></div>';\n}\nfunction hideLoadingIndicator() {\n    const loadingElement = containerEl.querySelector('.loader');\n    if (loadingElement) {\n        loadingElement.remove();\n    }\n}\nfunction createPictureMarkup({ webformatURL, likes, views, comments, downloads, largeImageURL }) {\n    return `\n        <a href=\"${largeImageURL}\" class= \"picture-link\">\n            <img src=\"${webformatURL}\">\n            <div class=\"picture-content\">\n                <div class=\"picture-text\">\n                    <span class=\"picture-title\">Likes</span>\n                    <span class=\"picture-sub-title\">${likes}</span>\n                </div>\n                <div class=\"picture-text\">\n                    <span class=\"picture-title\">Views</span>\n                    <span class=\"picture-sub-title\">${views}</span>\n                </div>\n                <div class=\"picture-text\">\n                    <span class=\"picture-title\">Comments</span>\n                    <span class=\"picture-sub-title\">${comments}</span>\n                </div>\n                <div class=\"picture-text\">\n                    <span class=\"picture-title\">Downloads</span>\n                    <span class=\"picture-sub-title\">${downloads}</span>\n                </div>\n            </div>\n        </a>`;\n}\nfunction handleSearch(event) {\n    event.preventDefault();\n    const form = event.currentTarget;\n    const picture = form.elements.picture.value.trim();\n\n    if (picture === \"\" || picture == null) {\n        iziToast.error({\n            message: `Sorry, there are no images matching your search query. Please, try again!`,\n            position: 'topRight'\n        })\n        containerEl.innerHTML = \"\";\n        return;\n    }\n    showLoadingIndicator();\n    searchPicture(picture)\n        .then((data) => {\n            if (data.hits && data.hits.length > 0) {\n                const hits = data.hits;\n                let markup = \"\";\n                for (const hit of hits) {\n                    markup += createPictureMarkup(hit);\n                }\n                containerEl.innerHTML = markup;\n                const lightbox = new SimpleLightbox('.card-container a', {\n                    captionsData: 'alt',\n                    captionPosition: 'bottom',\n                    captionDelay: 250,\n                });\n                lightbox.refresh();\n            } else {\n                containerEl.innerHTML = \"\";\n                iziToast.error({\n                    message: `Sorry, there are no images matching your search query. Please, try again!`,\n                    position: 'topRight'\n                });\n            }\n        })\n        .finally(() => {\n            hideLoadingIndicator();\n            form.reset();\n        })\n        .catch((error) => {\n            console.error('Fetch error:', error);\n            iziToast.error({\n                message: `An error occurred while fetching images. Please try again later.`,\n                position: 'topRight'\n            });\n        });\n}\nfunction searchPicture(picture) {\n    const urlParams = new URLSearchParams({\n        key: API_KEY,\n        q: picture,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true\n    });\n    return fetch(`${URL}?${urlParams}`)\n        .then((res) => {\n            if (!res.ok) {\n                throw new Error(res.statusText);\n            }\n            return res.json();\n        })\n        .catch((error) => {\n            console.error('Fetch error:', error);\n            iziToast.error({\n                message: `An error occurred while fetching images. Please try again later.`,\n                position: 'topRight'\n            });\n            return Promise.reject(error);\n        });\n}\n\n\n"],"names":["API_KEY","URL","formEl","containerEl","handleSearch","showLoadingIndicator","hideLoadingIndicator","loadingElement","createPictureMarkup","webformatURL","likes","views","comments","downloads","largeImageURL","event","form","picture","iziToast","searchPicture","data","hits","markup","hit","SimpleLightbox","error","urlParams","res"],"mappings":"6vBAKA,MAAMA,EAAU,qCACVC,EAAM,2BACNC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAc,SAAS,cAAc,iBAAiB,EAC5DD,EAAO,iBAAiB,SAAUE,CAAY,EAC9C,SAASC,GAAuB,CAC5BF,EAAY,UAAY,4BAC5B,CACA,SAASG,GAAuB,CAC5B,MAAMC,EAAiBJ,EAAY,cAAc,SAAS,EACtDI,GACAA,EAAe,OAAM,CAE7B,CACA,SAASC,EAAoB,CAAE,aAAAC,EAAc,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,cAAAC,GAAiB,CAC7F,MAAO;AAAA,mBACQA;AAAA,wBACKL;AAAA;AAAA;AAAA;AAAA,sDAI8BC;AAAA;AAAA;AAAA;AAAA,sDAIAC;AAAA;AAAA;AAAA;AAAA,sDAIAC;AAAA;AAAA;AAAA;AAAA,sDAIAC;AAAA;AAAA;AAAA,aAItD,CACA,SAAST,EAAaW,EAAO,CACzBA,EAAM,eAAc,EACpB,MAAMC,EAAOD,EAAM,cACbE,EAAUD,EAAK,SAAS,QAAQ,MAAM,OAE5C,GAAIC,IAAY,IAAMA,GAAW,KAAM,CACnCC,EAAS,MAAM,CACX,QAAS,4EACT,SAAU,UACtB,CAAS,EACDf,EAAY,UAAY,GACxB,MACH,CACDE,IACAc,EAAcF,CAAO,EAChB,KAAMG,GAAS,CACZ,GAAIA,EAAK,MAAQA,EAAK,KAAK,OAAS,EAAG,CACnC,MAAMC,EAAOD,EAAK,KAClB,IAAIE,EAAS,GACb,UAAWC,KAAOF,EACdC,GAAUd,EAAoBe,CAAG,EAErCpB,EAAY,UAAYmB,EACP,IAAIE,EAAe,oBAAqB,CACrD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAClC,CAAiB,EACQ,QAAO,CAChC,MACgBrB,EAAY,UAAY,GACxBe,EAAS,MAAM,CACX,QAAS,4EACT,SAAU,UAC9B,CAAiB,CAEjB,CAAS,EACA,QAAQ,IAAM,CACXZ,IACAU,EAAK,MAAK,CACtB,CAAS,EACA,MAAOS,GAAU,CACd,QAAQ,MAAM,eAAgBA,CAAK,EACnCP,EAAS,MAAM,CACX,QAAS,mEACT,SAAU,UAC1B,CAAa,CACb,CAAS,CACT,CACA,SAASC,EAAcF,EAAS,CAC5B,MAAMS,EAAY,IAAI,gBAAgB,CAClC,IAAK1B,EACL,EAAGiB,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EACD,OAAO,MAAM,GAAGhB,KAAOyB,GAAW,EAC7B,KAAMC,GAAQ,CACX,GAAI,CAACA,EAAI,GACL,MAAM,IAAI,MAAMA,EAAI,UAAU,EAElC,OAAOA,EAAI,MACvB,CAAS,EACA,MAAOF,IACJ,QAAQ,MAAM,eAAgBA,CAAK,EACnCP,EAAS,MAAM,CACX,QAAS,mEACT,SAAU,UAC1B,CAAa,EACM,QAAQ,OAAOO,CAAK,EAC9B,CACT"}